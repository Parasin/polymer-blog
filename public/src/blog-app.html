<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../bower_components/app-layout/app-scroll-effects/effects/waterfall.html"><link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../bower_components/app-layout/helpers/helpers.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../bower_components/iron-media-query/iron-media-query.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-selector/iron-selector.html"><link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html"><link rel="import" href="../bower_components/iron-icons/iron-icons.html"><link rel="import" href="../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../bower_components/iron-form/iron-form.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-input/paper-input.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html"><link rel="import" href="../bower_components/paper-dialog/paper-dialog.html"><link rel="import" href="../bower_components/neon-animation/web-animations.html"><link rel="import" href="../bower_components/neon-animation/neon-animation.html"><link rel="import" href="blog-home.html"><link rel="import" href="blog-login-dialog.html"><link rel="import" href="blog-profile.html"></head><body><dom-module id="blog-app"><template><style>:host{display                       :block;position                      :relative;padding-top                   :130px;padding-bottom                :64px;min-height                    :100vh;--app-primary-color           :#202020;--app-secondary-color         :#757575;--app-accent-color            :#172C50;--paper-button-ink-color      :var(--app-accent-color);--paper-icon-button-ink-color :var(--app-accent-color);--paper-spinner-color         :var(--app-accent-color);-webkit-tap-highlight-color   :rgba(0, 0, 0, 0);color                         :var(--app-primary-color);}app-header{@apply --layout-fixed-top;z-index          :1;background-color :rgba(255, 255, 255, 0.95);--app-header-shadow:{box-shadow :inset 0px 5px 6px -3px rgba(0, 0, 0, 0.2);height     :10px;bottom     :-10px;};}paper-icon-button{color :var(--app-primary-color);}@-webkit-keyframes fade-in{0%{opacity :0;}100%{opacity :1;}}@keyframes fade-in{0%{opacity :0;}100%{opacity :1;}}paper-icon-button.fade-in{-webkit-animation-duration  :1s;animation-duration          :1s;-webkit-animation-fill-mode :both;animation-fill-mode         :both;-webkit-animation-name      :fade-in;animation-name              :fade-in;}paper-button:disabled,
			paper-button[disabled]{border           :1px solid #999999;background-color :#cccccc;color            :#666666;}@-webkit-keyframes bounce{0%{-webkit-transform :translateY(0);opacity           :0;}20%{-webkit-transform :translateY(0);}50%{-webkit-transform :translateY(0);}40%{-webkit-transform :translateY(-25px);}60%{-webkit-transform :translateY(-15px);}80%{-webkit-transform :translateY(0);}100%{-webkit-transform :translateY(0);opacity           :1;}}@keyframes bounce{0%{-webkit-transform :translateY(0);opacity           :0;}20%{-webkit-transform :translateY(0);}50%{-webkit-transform :translateY(0);}40%{-webkit-transform :translateY(-25px);}60%{-webkit-transform :translateY(-15px);}80%{-webkit-transform :translateY(0);}100%{-webkit-transform :translateY(0);opacity           :1;}}.loginSuccess /*[href*="w3schools"]*/{-webkit-animation-name      :bounce;animation-name              :bounce;color                       :#0b8043;height                      :40px;width                       :40px;top                         :15px;position                    :relative;float                       :right;-webkit-animation-duration  :1s;animation-duration          :1s;-webkit-animation-fill-mode :both;animation-fill-mode         :both;}.logo{text-align :center;}.logo a{font-size       :16px;font-weight     :600;letter-spacing  :0.3em;color           :var(--app-primary-color);text-decoration :none;display         :inline-block;pointer-events  :auto;}.left-bar-item{width :40px;}.menu-btn{display :none;}.cart-btn-container{}.announcer{position :fixed;height   :0;overflow :hidden;}:host(:not([page=detail])) .back-btn{display :none;}[hidden]{display :none !important;}#tabContainer{position :relative;height   :66px;}shop-tabs, shop-tab{--shop-tab-overlay:{border-bottom :2px solid var(--app-accent-color);};}shop-tabs{height :100%;}shop-tab{margin :0 10px;}shop-tab a{display         :inline-block;outline         :none;padding         :9px 5px;font-size       :13px;font-weight     :500;text-decoration :none;color           :var(--app-primary-color);}.cart-badge{position         :absolute;top              :-2px;right            :0;width            :20px;height           :20px;background-color :var(--app-accent-color);border-radius    :50%;color            :white;font-size        :12px;font-weight      :500;pointer-events   :none;@apply --layout-vertical;@apply --layout-center-center;}.drawer-list{margin :0 20px;}.drawer-list a{display         :block;padding         :0 16px;line-height     :40px;text-decoration :none;color           :var(--app-secondary-color);}.drawer-list a.iron-selected{color       :black;font-weight :bold;}shop-cart-modal{z-index :2;}app-drawer{z-index :3;}iron-pages{max-width :1440px;margin    :0 auto;}footer{position    :absolute;bottom      :0;left        :0;right       :0;text-align  :center;margin-top  :20px;line-height :24px;}footer > a{color           :var(--app-secondary-color);text-decoration :none;}footer > a:hover{text-decoration :underline;}.demo-label{box-sizing       :border-box;width            :120px;padding          :6px;margin           :8px auto 0;background-color :var(--app-primary-color);color            :white;text-transform   :uppercase;}@media (max-width : 767px){:host{padding-top :64px;}.menu-btn{display :block;}:host([page=detail]) .menu-btn{display :none;}}</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}"></app-route><iron-media-query query="max-width: 767px" query-matches="{{smallScreen}}"></iron-media-query><app-header role="navigation" id="header" effects="waterfall" condenses="" reveals=""><app-toolbar><div class="left-bar-item"><paper-icon-button class="menu-btn" icon="menu" on-click="_toggleDrawer" aria-label="Categories"></paper-icon-button><a class="back-btn" href="/list/[[categoryName]]" tabindex="-1"><paper-icon-button icon="arrow-back" aria-label="Go back"></paper-icon-button></a></div><div class="logo" main-title=""><a href="/" aria-label="Blog Home">Welcome</a></div><span class="cart-btn-container"><span hidden$="[[ token ]]"><paper-icon-button id="loginBtn" icon="account-circle" aria-label="Log in" class="fade-in" on-tap="_openDialog"></paper-icon-button><paper-tooltip for="loginBtn">Login</paper-tooltip></span><span hidden$="[[ !token ]]"><a href$="/profile/[[ user._id ]]" tabindex="-1"><paper-icon-button id="profileBtn" icon="face" class="account-cirlce" aria-label="Profile"></paper-icon-button><paper-tooltip for="profileBtn">Profile</paper-tooltip></a><paper-icon-button id="logoutBtn" icon="exit-to-app" aria-label="Log out" class="fade-in" on-tap="_logOut"></paper-icon-button><paper-tooltip for="logoutBtn">Logout</paper-tooltip></span></span></app-toolbar><div id="tabContainer" sticky$="[[_shouldShowTabs]]" hidden$="[[!_shouldShowTabs]]"><dom-if if="[[_shouldRenderTabs]]"><template><shop-tabs selected="[[categoryName]]" attr-for-selected="name"><dom-repeat items="[[categories]]" as="category" initial-count="4"><template><shop-tab name="[[category.name]]"><a href="/list/[[category.name]]">[[category.title]]</a></shop-tab></template></dom-repeat></shop-tabs></template></dom-if></div></app-header><dom-if if="[[_shouldRenderDrawer]]"><template><app-drawer opened="{{drawerOpened}}" swipe-open="" tabindex="0"><iron-selector role="navigation" class="drawer-list" selected="[[categoryName]]" attr-for-selected="name"><dom-repeat items="[[categories]]" as="category" initial-count="4"><template><a name="[[category.name]]" href="/list/[[category.name]]">[[category.title]]</a></template></dom-repeat></iron-selector></app-drawer></template></dom-if><iron-localstorage id="localStoreToken" name="token" value="{{ token }}"></iron-localstorage><iron-localstorage id="localStoreUser" name="user" value="{{ user }}"></iron-localstorage><iron-pages role="main" selected="[[page]]" attr-for-selected="name" selected-attribute="visible" fallback-selection="404"><blog-home name="home"></blog-home><blog-profile name="profile" route="[[ subroute ]]" offline="[[ offline ]]" user="{{ user }}" token="[[ token ]]"></blog-profile><shop-404-warning name="404"></shop-404-warning></iron-pages><footer></footer><div class="announcer" aria-live="assertive">[[_a11yLabel]]</div><blog-login-dialog id="loginDialog" authenticated="{{ authenticated }}"></blog-login-dialog></template><script>window.performance&&performance.mark&&performance.mark('blog-app - before register');class BlogApp extends Polymer.Element{static get is(){return'blog-app'}static get properties(){return{_loginDisabled:{type:Boolean,value:!0,computed:'_computeLoginDisabled(usernamePopulated, passwordPopulated)'},authenticated:{type:Boolean,value:!1,notify:!0},token:{type:String,notify:!0},page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},_shouldShowTabs:{computed:'_computeShouldShowTabs(page, smallScreen)'},_shouldRenderTabs:{computed:'_computeShouldRenderTabs(_shouldShowTabs, loadComplete)'},_shouldRenderDrawer:{computed:'_computeShouldRenderDrawer(smallScreen, loadComplete)'}}}static get observers(){return['_routePageChanged(routeData.page)','_computeShouldRenderDrawer(usernameInvalid, passwordInvalid)']}constructor(){super(),window.performance&&performance.mark&&performance.mark('blog-app.created')}ready(){super.ready(),this.removeAttribute('unresolved'),this.addEventListener('change-section',a=>this._onChangeSection(a)),this.addEventListener('announce',a=>this._onAnnounce(a)),this.addEventListener('dom-change',a=>this._domChange(a)),this.addEventListener('show-invalid-url-warning',a=>this._onFallbackSelectionTriggered(a)),this.addEventListener('authenticated',a=>this._authenticated(a)),Polymer.RenderStatus.afterNextRender(this,()=>{window.addEventListener('online',a=>this._notifyNetworkStatus(a)),window.addEventListener('offline',a=>this._notifyNetworkStatus(a))})}_routePageChanged(a){'list'===this.page&&(this._listScrollTop=window.pageYOffset),this.page=a||'home',this.drawerOpened=!1}_pageChanged(a,b){if(null!=a)if('home'==a)this._pageLoaded(!!b);else{let c=this._pageLoaded.bind(this,!!b);Polymer.importHref(this.resolveUrl('blog-'+a+'.html'),c,c,!0)}}_pageLoaded(a){this._ensureLazyLoaded(),a&&Polymer.Async.timeOut.run(()=>{this.$.header.resetLayout()},1)}_ensureLazyLoaded(){this.loadComplete||Polymer.RenderStatus.afterNextRender(this,()=>{Polymer.importHref(this.resolveUrl('lazy-resources.html'),()=>{'serviceWorker'in navigator&&navigator.serviceWorker.register('service-worker.js',{scope:'/'}),this._notifyNetworkStatus(),this.loadComplete=!0})})}_notifyNetworkStatus(){let a=this.offline;this.offline=!navigator.onLine,(this.offline||!this.offline&&!0===a)&&(!this._networkSnackbar&&(this._networkSnackbar=document.createElement('shop-snackbar'),this.root.appendChild(this._networkSnackbar)),this._networkSnackbar.innerHTML=this.offline?'You are offline':'You are online',this._networkSnackbar.open())}_toggleDrawer(){this.drawerOpened=!this.drawerOpened}_onChangeSection(a){let b=a.detail,c=0;'list'===this.page&&(this.categoryName===b.category?c=this._listScrollTop:this._listScrollTop=0),Polymer.AppLayout.scroll({top:c,behavior:'silent'}),this.categoryName=b.category||'',b.title&&(document.title=b.title+' - BLOG',this._announce(b.title+', loaded'))}_onAnnounce(a){this._announce(a.detail)}_announce(a){this._a11yLabel='',this._announceDebouncer=Polymer.Debouncer.debounce(this._announceDebouncer,Polymer.Async.timeOut.after(100),()=>{this._a11yLabel=a})}_domChange(a){if(window.performance&&performance.mark&&!this.__loggedDomChange){let b=a.composedPath()[0],c=b.getRootNode().host;c&&c.localName.match(this.page)&&(this.__loggedDomChange=!0,performance.mark(c.localName+'.domChange'))}}_onFallbackSelectionTriggered(){this.page='404'}_authenticated(a){a.detail&&a.detail.user&&a.detail.token&&(this.token=a.detail.token,this.user=a.detail.user,this.set('authenticated',!0))}_logOut(){this.set('token',null),this.set('user',null),this.set('authenticated',!1),this.set('route.path','/home')}_submitLogin(){this.$.loginUsername.invalid||this.$.loginPassword.invalid||this.authenticated||(this.formBody={userName:this.$.loginUsername.value,password:this.$.loginPassword.value},this.$.loginIA.generateRequest())}_computeLoginDisabled(a,b){return!(a||b&&b.length&&8<=b.length)}_computeShouldShowTabs(a,b){return('home'===a||'list'===a||'detail'===a)&&!b}_computeShouldRenderTabs(a,b){return a&&b}_computeShouldRenderDrawer(a,b){return a&&b}_openDialog(){this.authenticated?this.$.profileDialog.open():this.$.loginDialog.$.dialog.open()}}customElements.define(BlogApp.is,BlogApp);</script></dom-module></body></html>